![jp81f](https://i.imgur.com/2nig7JA.jpeg)

# 日本語配列キーボード 「JP81F」 ビルドガイド
  
## 内容物
不足があれば[X（旧Twitter）](https://x.com/alektor_diy)でご連絡ください。
- トッププレート *1枚
- メインプレート *1枚
- ボトムプレート *1枚
- カバープレート *1枚
- M3スペーサー（M3長さ7mm丸型） *7個
- M3スペーサー（M3長さ4mm丸型） *8個
![プレート](https://i.imgur.com/MzVx6oT.jpg)
<br>
<br>

## 別途用意が必要なもの
※リンク先は参考です、別途他の方法で用意いただいても問題ございませんが互換性についてはご自身の責任で確認をお願いいたします。
- [Pro Micro Micro-B版](https://shop.yushakobo.jp/products/pro-micro) *1個
- [コンスルー（12ピン 高さ2.5mm）](https://shop.yushakobo.jp/products/31?variant=37665714405537) *2本
  - 遊舎工房で購入する場合は[セット品](https://shop.yushakobo.jp/products/21)もあります
- [MX用キースイッチソケット](https://shop.yushakobo.jp/products/a01ps?_pos=2&_sid=fa442d940&_ss=r&variant=37665172521121) *81個 
- ダイオード *81個
  - [リードタイプ](https://shop.yushakobo.jp/products/a0800di-01-100)、[SMDタイプ](https://shop.yushakobo.jp/products/a0800di-02-100)どちらでも大丈夫です
- [タクタイルスイッチ](https://shop.yushakobo.jp/products/a0800ts-01-1) *1個
- [MXスイッチ スタビライザー 2u](https://shop.yushakobo.jp/products/a0500st?variant=37665699430561) *2個
- [M3ネジ（長さ3mm）](https://shop.yushakobo.jp/products/a0800s3?variant=37665433485473) *30個
- USB Micro-B ケーブル
  - ProMicroのUSB端子はもげることがあるため、[マグネット式のケーブル](https://amzn.asia/d/bDGuyXt)がオススメです
- お好きなCherry MX互換キースイッチ（5ピンor3ピン） *81個
- お好きなキーキャップ *1式
  - JP81Fは[Majestouch用キーキャップ](https://amzn.asia/d/8lLrkIZ)を使うことを想定して設計しています
- ゴム足 *4個
  - 100均やホームセンターなどで売っているもので大丈夫です、お好みの高さのものを取り付けてください
 <br>
 <br>
 
## 作成手順

### PCB基板の側面の処理
PCB基板の側面を油性ペンで黒く塗りつぶします。  
性能には影響しませんが、完成時の見た目が格段によくなるため是非実施してください。  
（完成後に皮ベルトなどを巻く場合は不要です）
<br>
<br>

### ダイオードのハンダ付け
メインプレートへダイオードをハンダ付けします。  
リードタイプ、SMDタイプどちらを使用しても大丈夫です。  
ダイオードは極性がありますので、取り付け向きにご注意ください。  
  
リードタイプを使用する場合はハンダ付け前に足をカットしておくと仕上がりが綺麗です。
1. ダイオードを極性に注意して差し込み、メインプレート表面に飛び出た足を曲げて仮固定する
2. メインプレート裏側からマスキングテープなどでダイオードを固定する
3. メインプレート表側に飛び出た足をニッパーなどでカットする
4. メインプレート表側からハンダ付けする

> ※メインプレート表側＝キースイッチを差す側、メインプレート裏側＝キースイッチソケットをハンダ付けする側
<br>
<br>

### キースイッチソケットのハンダ付け
メインプレート裏面へキースイッチソケットをハンダ付けします。  
表面実装部品のため、以下の流れでハンダ付けをしてください。  
1. 取り付け部の片側にのみ予備ハンダする
2. キースイッチソケットを向きに気を付けて差し込みながら予備ハンダした部分にハンダごてを当て、予備ハンダを溶かしながら固定する
3. 予備ハンダしていない側をハンダ付けする
4. 予備ハンダした側にハンダを足してしっかり固定する

> ※初めての方は「表面実装 はんだ付け」などで検索し、動画などで手順を確認することをオススメします
<br>
<br>

### ProMicroとコンスルーのハンダ付け、基板への取り付け
> **◆注意◆**  
> JP81FはProMicroのコンスルーとESCキーのキーソケットが若干干渉します。  
> 力を加えればはめ込むことができるギリギリのラインになっているので、申し訳ありませんがうまいこと取り付けてください。
<br>

先にメインプレートへコンスルーを取り付けてからProMicroを取り付ける必要があります。
1. メインプレート裏面へコンスルーを取り付けます。  
[コンスルーは上下左右の向きを揃えた方がいい](https://yushakobo.zendesk.com/hc/ja/articles/360044233974-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%AB%E3%83%BC-%E3%82%B9%E3%83%97%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%94%E3%83%B3%E3%83%98%E3%83%83%E3%83%80-%E3%81%AE%E5%8F%96%E3%82%8A%E4%BB%98%E3%81%91%E6%96%B9%E3%82%92%E6%95%99%E3%81%88%E3%81%A6%E4%B8%8B%E3%81%95%E3%81%84)ようなのでご注意ください。
    * 片側のコンスルーがESCキーのキースイッチソケットと干渉する可能性が高いです。  
      その場合はコンスルーを破損しない程度に斜めに力を加えるとギリギリ差し込むことができます。
2. コンスルーへProMicroを差し込みます。  
ProMicroのチップ実装面が見えるように差し込んでください。  
正しい向きで取り付けできていれば基板の印字とProMicroの印字が同じになります。
![](https://i.imgur.com/A1HyNjt.png)
3. ProMicroのピン24か所をハンダ付けします。
<br>
<br>

### リセットスイッチのハンダ付け
リセットスイッチをProMicroと同じ面に取り付けます。
![](https://i.imgur.com/laQTR9W.png)
1. リセットスイッチをProMicroと同じ面から差し込む
2. メインプレート裏側からマスキングテープなどでリセットスイッチを固定する
3. メインプレート表側からハンダ付けする
<br>
<br>

### ProMicroへのファームウェアの書き込み
REMAPでファームウェアの書き込みが可能です。
1. ProMicroをPCと接続します。
2. REMAP上の[JP81Fのファームウェアページ](https://remap-keys.app/catalog/UvQIkYJF6VngLfmcaxkt/firmware)にアクセスします。
3. 「FLASH」をクリックします。  
![FLASH](https://i.imgur.com/5RqwaUh.png)
4. 「caterina」が選択されていることを確認し「FLASH」をクリックします。  
![](https://i.imgur.com/UzFoZeJ.png)
5. シリアルポートへの接続要求画面が表示されたらキーボードに取り付けた「RESETスイッチ」を押します。
6. 表示に変化があったポートを選択し「接続」をクリックします。  
![](https://i.imgur.com/shr5t22.png)
7. 進捗が100%になり「Writing the firmware finished successfully.」が表示されたら「CLOSE」をクリックして完了です。  
![](https://i.imgur.com/v9G2bXa.png)
<br>
<br>

### 動作テスト
組み立てる前に動作テストを行います。
1. [REMAPの設定ページ](https://remap-keys.app/configure)へアクセスし「+KEYBOARD」をクリックします。  
![](https://i.imgur.com/1D3n1O5.png)
2. 「jp81f」を選択し「接続」をクリックします。  
![](https://i.imgur.com/ZrLrPnl.png)
4. キーマップ設定画面が表示されたら「…」→「Test Matorix Mode」をクリックします。  
![](https://i.imgur.com/PfVQJVJ.png)
5. ピンセット等で短絡させるか、実際にキースイッチを接続して、正しく反応するかテストします。  
![](https://i.imgur.com/uBxzkET.png)
> 反応しないキーがある場合はパーツの取り付け忘れやハンダ付けのミスを確認してみてください。  
> 特定のキーのみであれば取り付け不備の場合が多いです。  
> まとまったキーが反応しない場合はProMicro側のピンのハンダ付けに不備がある場合が多いです。
<br>
<br>

### 組み立て
無事動作テストが完了したら最後に組み立てます。  
JP81Fはサンドイッチ構造を採用しているので、最終的に上から「トッププレート」「メインプレート」「ボトムプレート」「カバープレート」の順で重なった構造になります。  
ネジ止めの順番に指定がありますのでご注意ください。  
<br>

1. ボトムプレートにカバープレートと接続する用のスペーサーを取り付けます。
この際使用するネジ穴は以下の通りです。
![](https://i.imgur.com/lZsSro8.png)
画像の面からM3ネジ、反対側からスペーサー（4mm）でネジ止めしてください。  
なおカバープレートはまだ取り付けないでください。
<br>

2. トッププレートの全ての穴にキースイッチを取り付けます。  
この際以下の点に注意してください。
    - キースイッチの向き（メインプレートとの位置関係を確認してください、全て同じ向きでキースイッチを取り付けます）
    - キースイッチのピンの曲がり（このあとメインプレートに差し込む際にピンが曲がっているとキースイッチが壊れます。曲がっている場合は真っすぐに修正するか別の物を利用してください）
<br>

3. トッププレートとメインプレートを合体させます。  
トッププレートに対しメインプレートを真っすぐ下ろして、すべてのキースイッチのピンがソケットに収まるようにはめ込んでください。  
トッププレートが斜めにならないように、全体的に少しずつ力を加えながらピンをはめていくと綺麗に収まります。
    - まずはメインプレートの上にトッププレートを乗せて穴位置が合うようにする
    - 端から順に軽く力を加えて、ピンが軽く差さっている状態にする
    - 全体に均等に少しずつ力を加えて最後まではめる
    - メインプレート裏面からソケットの穴を目視し、全てのピンがしっかりハマっていることを確認する。
<br>  

4. メインプレートが表になるように置き、基板端の7か所の穴にスペーサー（7mm）を入れます。
その後トッププレート側からM3ネジでネジ止めします。
<br>

5. メインプレートのスペーサーの位置に合わせてボトムプレートを取り付け、M3ネジでネジ止めします。
<br>

6. 最後にボトムプレートのスペーサーの位置に合わせてカバープレートをM3ネジでネジ止めします。
<br>

8. あとはお好みのキーキャップとゴム足を取り付ければ完成です。
   ![](https://i.imgur.com/DzeQB7s.png)
<br>

以上で完成です！  
組み立てお疲れ様でした！
<br>
<br>

## 完成したら
完成した写真をX（旧Twitter）に投稿していただけると作者が喜びます。  
その際は是非ハッシュタグ **#JP81F** や **#自作キーボード** をつけていただけると嬉しいです。  
大喜びでいいね&リポストさせていただきます。  
<br>

キーマッピングは[REMAP](https://remap-keys.app/)を活用することで簡単に変更することができます。  
自身に最適なキーマップを試行錯誤しながら作成するのは自作キーボードの醍醐味ですので、是非チャレンジしてみてください。


また基板の外周に皮ベルトを巻いたりオシャレなキーキャップと交換したり、カスタマイズを楽しむのも自作キーボードの醍醐味です。  
是非自分だけのキーボードを作って楽しんでください🤗
> 皮ベルトを巻く場合は幅9mmのものを使うとジャストフィットします。

## 改訂履歴
2024/8/7 初版

> この記事はJP81Fを使用して作成しました。
